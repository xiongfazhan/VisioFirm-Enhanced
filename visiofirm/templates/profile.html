{% extends "labeler_base.html" %}
{% block title %}个人资料{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h1>个人资料</h1>
        <div class="avatar">
            {{ current_user.first_name[0] if current_user.first_name else 'U' }}{{ current_user.last_name[0] if current_user.last_name else '' }}
        </div>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number" data-stat="projects">0</div>
            <div class="stat-label">项目</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" data-stat="datasets">0</div>
            <div class="stat-label">数据集</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" data-stat="annotations">0</div>
            <div class="stat-label">标注</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" data-stat="training_sessions">0</div>
            <div class="stat-label">训练次数</div>
        </div>
    </div>
    
    <div class="profile-info">
        <div class="info-section">
            <h3 class="section-title">
                <i class="fas fa-user"></i>
                基本信息
            </h3>
            <div class="info-item">
                <span class="info-label">用户名</span>
                <span class="info-value" data-field="username">{{ current_user.username }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">邮箱</span>
                <span class="info-value" data-field="email">{{ current_user.email }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">姓名</span>
                <span class="info-value" data-field="first_name">{{ current_user.first_name }} {{ current_user.last_name }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">公司</span>
                <span class="info-value" data-field="company">{{ current_user.company or '未设置' }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">注册时间</span>
                <span class="info-value" data-field="join_date">{{ current_user.created_at.strftime('%Y年%m月%d日') if current_user.created_at else '未知' }}</span>
            </div>
        </div>
        
        <div class="info-section">
            <h3 class="section-title">
                <i class="fas fa-cog"></i>
                账户管理
            </h3>
            <div class="info-item">
                <span class="info-label">账户状态</span>
                <span class="info-value">活跃</span>
            </div>
            <div class="info-item">
                <span class="info-label">最后登录</span>
                <span class="info-value">{{ current_user.last_login_at.strftime('%Y-%m-%d %H:%M') if current_user.last_login_at else '未知' }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">存储使用</span>
                <span class="info-value">2.5 GB / 10 GB</span>
            </div>
        </div>
    </div>
    
    <div class="action-buttons">
        <button class="btn btn-primary" id="editProfileBtn">
            <i class="fas fa-edit"></i>
            编辑资料
        </button>
        <button class="btn btn-secondary" id="changePasswordBtn">
            <i class="fas fa-key"></i>
            更改密码
        </button>
        <button class="btn btn-secondary" id="exportDataBtn">
            <i class="fas fa-download"></i>
            导出数据
        </button>
        <button class="btn btn-secondary" id="settingsBtn">
            <i class="fas fa-cog"></i>
            设置
        </button>
        <button class="btn btn-danger" id="deleteAccountBtn">
            <i class="fas fa-trash"></i>
            删除账户
        </button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}
